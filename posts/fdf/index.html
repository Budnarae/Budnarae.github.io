<!DOCTYPE html>
<html lang="en" style="font-size: 105%">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <meta name="author" content="budnarae">

  
  
  <meta name="description" content="FDF 개요 fdf 과제는 아래와 같이 map 파일을 입력받아 3차원 형태로 출력하도록 하는 과제이다. map은 다음과 같이 해석된다. 숫자의 가로 위치 : 3차원 좌표계의 x 값 숫">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://Budnarae.github.io//images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://Budnarae.github.io//images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://Budnarae.github.io//images/favicon-16x16.png">

  
  
  <meta name="keywords" content='hugo latex theme blog texify texify2 texify3 michael neuper'>
  

  
  
  <link rel="stylesheet" href='/katex/katex.min.css'>
<script defer defer src='/katex/katex.min.js'></script>
<script defer src='/katex/contrib/auto-render.min.js'></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          throwOnError : false
        });
    });
</script>
  

  
  <script data-name="" 
    data-cfasync="false" 
    src="" 
    data-id="" 
    data-description="" 
    data-message="" 
    data-color="#d79921" 
    data-position="Right" 
    data-x_margin="18" 
    data-y_margin="18"
    crossorigin="anonymous">
</script>


  
  <meta property="og:title" content="Fdf" />
<meta property="og:description" content="FDF 개요 fdf 과제는 아래와 같이 map 파일을 입력받아 3차원 형태로 출력하도록 하는 과제이다. map은 다음과 같이 해석된다. 숫자의 가로 위치 : 3차원 좌표계의 x 값 숫" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Budnarae.github.io/posts/fdf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-04T08:11:23+00:00" />
<meta property="article:modified_time" content="2024-03-04T08:11:23+00:00" /><meta property="og:site_name" content="budnarae archive" />



  
  <link rel="canonical" href="https://Budnarae.github.io/posts/fdf/">

  
  
  <meta itemprop="name" content="Fdf">
<meta itemprop="description" content="FDF 개요 fdf 과제는 아래와 같이 map 파일을 입력받아 3차원 형태로 출력하도록 하는 과제이다. map은 다음과 같이 해석된다. 숫자의 가로 위치 : 3차원 좌표계의 x 값 숫"><meta itemprop="datePublished" content="2024-03-04T08:11:23+00:00" />
<meta itemprop="dateModified" content="2024-03-04T08:11:23+00:00" />
<meta itemprop="wordCount" content="3115">
<meta itemprop="keywords" content="C_language,graphics,42seoul,fdf," />

  
  
  
    <link rel="stylesheet" href="/css/common.min.e562d763c6d0825495eb17de8b2c1d9800cf7c08db1c36accedf77a5fccfc4b9.css" integrity="sha256-5WLXY8bQglSV6xfeiywdmADPfAjbHDaszt93pfzPxLk=" crossorigin="anonymous">
  

  
  
    <link rel="stylesheet" href="/css/content.min.ba38eba94cb47fef9936258c42d11ff19fa9686a30b38e783773fe3f15eb44dc.css" integrity="sha256-ujjrqUy0f&#43;&#43;ZNiWMQtEf8Z&#43;paGows454N3P&#43;PxXrRNw=" crossorigin="anonymous">
  

  
  
  <title>Fdf - budnarae archive</title>
  

  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Fdf"/>
<meta name="twitter:description" content="FDF 개요 fdf 과제는 아래와 같이 map 파일을 입력받아 3차원 형태로 출력하도록 하는 과제이다. map은 다음과 같이 해석된다. 숫자의 가로 위치 : 3차원 좌표계의 x 값 숫"/>


  


  <link rel="stylesheet" href="/css/single.min.be779f459ad7e3aaf8afd0f80c6a61ca6c50993f5f18512532100ac6d93f0fa9.css" integrity="sha256-vnefRZrX46r4r9D4DGphymxQmT9fGFElMhAKxtk/D6k=" crossorigin="anonymous">


  <link rel="stylesheet" href="/css/single.min.78a121b7d7a160420f9daab0ea13add66c37b9c44f27bba07b27207e2b0975d2.css" integrity="sha256-eKEht9ehYEIPnaqw6hOt1mw3ucRPJ7ugeycgfisJddI=" crossorigin="anonymous">


</head>

<body>
  <div id="wrapper">
    


<header id="header">
  <h1>
    <a href="https://Budnarae.github.io/">budnarae archive</a>
    <button id="dark-mode-toggle" class="dark-mode-toggle" aria-label="Toggle theme">
        <svg width="2rem" height="2rem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 496">
        <path fill="currentColor" d="M8,256C8,393,119,504,256,504S504,393,504,256,393,8,256,8,8,119,8,256ZM256,440V72a184,184,0,0,1,0,368Z" transform="translate(-8 -8)"/>
        </svg>
    </button>
  </h1>

  <nav>
    
    <span class="nav-bar-item">
      
        <span class="icon"><svg width="1em" height="1em" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M17,11H16a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm0,4H16a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2ZM11,9h6a1,1,0,0,0,0-2H11a1,1,0,0,0,0,2ZM21,3H7A1,1,0,0,0,6,4V7H3A1,1,0,0,0,2,8V18a3,3,0,0,0,3,3H18a4,4,0,0,0,4-4V4A1,1,0,0,0,21,3ZM6,18a1,1,0,0,1-2,0V9H6Zm14-1a2,2,0,0,1-2,2H7.82A3,3,0,0,0,8,18V5H20Zm-9-4h1a1,1,0,0,0,0-2H11a1,1,0,0,0,0,2Zm0,4h1a1,1,0,0,0,0-2H11a1,1,0,0,0,0,2Z"/></svg>
</span>
      
      <a class="link" href="/posts/">Blog</a>
    </span>
    
    <span class="nav-bar-item">
      
        <span class="icon"><svg width="1em" height="1em" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M2.88,16.88a3,3,0,0,0,0,4.24,3,3,0,0,0,4.24,0,3,3,0,0,0-4.24-4.24Zm2.83,2.83a1,1,0,0,1-1.42-1.42,1,1,0,0,1,1.42,0A1,1,0,0,1,5.71,19.71ZM5,12a1,1,0,0,0,0,2,5,5,0,0,1,5,5,1,1,0,0,0,2,0,7,7,0,0,0-7-7ZM5,8a1,1,0,0,0,0,2,9,9,0,0,1,9,9,1,1,0,0,0,2,0,11.08,11.08,0,0,0-3.22-7.78A11.08,11.08,0,0,0,5,8Zm10.61.39A15.11,15.11,0,0,0,5,4,1,1,0,0,0,5,6,13,13,0,0,1,18,19a1,1,0,0,0,2,0A15.11,15.11,0,0,0,15.61,8.39Z"/></svg>
</span>
      
      <a class="link" href="/index.xml">RSS</a>
    </span>
    
    <span class="nav-bar-item">
      
        <span class="icon"><svg width="1em" height="1em" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1">
<path d="M10.07031,20.50291a1.00008,1.00008,0,0,0-1.18115-.9834c-1.30908.24024-2.96191.27637-3.40137-.958a5.70754,5.70754,0,0,0-1.83691-2.415,1.20073,1.20073,0,0,1-.1665-.10938,1,1,0,0,0-.93067-.64551H2.54883a.99965.99965,0,0,0-1,.99512c-.00391.81543.811,1.33789,1.1416,1.51465a4.4408,4.4408,0,0,1,.92383,1.35937c.36426,1.02344,1.42285,2.57617,4.46582,2.376.001.03516.00195.06836.00244.09863l.00439.26758a1,1,0,0,0,2,0l-.00488-.31836C10.07715,21.4951,10.07031,21.22068,10.07031,20.50291Zm10.667-15.126c.03174-.125.063-.26367.09034-.41992a6.27792,6.27792,0,0,0-.40821-3.293,1.002,1.002,0,0,0-.61572-.58007c-.356-.12012-1.67041-.35645-4.18408,1.25a13.86918,13.86918,0,0,0-6.354,0C6.76221.751,5.45459.9658,5.10205,1.07908a.99744.99744,0,0,0-.63135.584,6.3003,6.3003,0,0,0-.40332,3.35644c.02442.12793.05078.2461.07813.35449A6.26928,6.26928,0,0,0,2.89014,9.20311a8.42168,8.42168,0,0,0,.04248.92187c.334,4.60254,3.334,5.98438,5.42431,6.459-.04345.125-.083.25878-.11816.40039a1.00023,1.00023,0,0,0,1.94238.47851,1.6784,1.6784,0,0,1,.46778-.87793.99947.99947,0,0,0-.5459-1.74512c-3.4541-.39453-4.95362-1.80175-5.1792-4.89843a6.61076,6.61076,0,0,1-.03369-.73828,4.25769,4.25769,0,0,1,.91943-2.71289,3.022,3.022,0,0,1,.1958-.23145.99988.99988,0,0,0,.188-1.02441,3.3876,3.3876,0,0,1-.15527-.55567A4.09356,4.09356,0,0,1,6.1167,3.06346a7.54263,7.54263,0,0,1,2.415,1.17968,1.00877,1.00877,0,0,0,.82764.13282,11.77716,11.77716,0,0,1,6.17285.001,1.00549,1.00549,0,0,0,.83056-.13769,7.572,7.572,0,0,1,2.40528-1.19043,4.03977,4.03977,0,0,1,.0874,1.57812,3.205,3.205,0,0,1-.16895.60743.9999.9999,0,0,0,.188,1.02441c.07715.08691.1543.18066.22363.26855A4.12186,4.12186,0,0,1,20,9.20311a7.03888,7.03888,0,0,1-.0376.77734c-.22021,3.05566-1.72558,4.46387-5.1958,4.85937a1,1,0,0,0-.54541,1.7461,1.63079,1.63079,0,0,1,.46631.9082,3.06079,3.06079,0,0,1,.09229.81934v2.334C14.77,21.2949,14.77,21.78025,14.77,22.00291a1,1,0,1,0,2,0c0-.2168,0-.69238.00977-1.33984V18.31346a4.8815,4.8815,0,0,0-.15479-1.31153,4.25638,4.25638,0,0,0-.11621-.416,6.51258,6.51258,0,0,0,5.44531-6.42383A8.69677,8.69677,0,0,0,22,9.20311,6.13062,6.13062,0,0,0,20.7373,5.37693Z"/></svg>
</span>
      
      <a class="link" href="https://github.com/Budnarae">GitHub</a>
    </span>
    
  </nav>
</header>
<hr class="head-rule"></hr>
    
<main id="main" class="post">
  
  <div class="post-heading">
    <h1 class="post-title">Fdf</h1>
    <div class="publish-metadata">
      
      <svg width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 9H21M7 3V5M17 3V5M6 13H8M6 17H8M11 13H13M11 17H13M16 13H18M16 17H18M6.2 21H17.8C18.9201 21 19.4802 21 19.908 20.782C20.2843 20.5903 20.5903 20.2843 20.782 19.908C21 19.4802 21 18.9201 21 17.8V8.2C21 7.07989 21 6.51984 20.782 6.09202C20.5903 5.71569 20.2843 5.40973 19.908 5.21799C19.4802 5 18.9201 5 17.8 5H6.2C5.0799 5 4.51984 5 4.09202 5.21799C3.71569 5.40973 3.40973 5.71569 3.21799 6.09202C3 6.51984 3 7.07989 3 8.2V17.8C3 18.9201 3 19.4802 3.21799 19.908C3.40973 20.2843 3.71569 20.5903 4.09202 20.782C4.51984 21 5.07989 21 6.2 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      4 March 2024
      
      
        &nbsp;
        <span>
          <svg width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15.4998 5.49994L18.3282 8.32837M3 20.9997L3.04745 20.6675C3.21536 19.4922 3.29932 18.9045 3.49029 18.3558C3.65975 17.8689 3.89124 17.4059 4.17906 16.9783C4.50341 16.4963 4.92319 16.0765 5.76274 15.237L17.4107 3.58896C18.1918 2.80791 19.4581 2.80791 20.2392 3.58896C21.0202 4.37001 21.0202 5.63634 20.2392 6.41739L8.37744 18.2791C7.61579 19.0408 7.23497 19.4216 6.8012 19.7244C6.41618 19.9932 6.00093 20.2159 5.56398 20.3879C5.07171 20.5817 4.54375 20.6882 3.48793 20.9012L3 20.9997Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          3115 words
        </span>
      
      
      
        
      
      
        &nbsp;
        <span>
          <svg width="0.75em" height="0.75em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 7V12L14.5 13.5M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          ~7 mins
        </span>
      
    </div>
  </div>

  
  <div>
    
    <a class="link tag" href='https://Budnarae.github.io/tags/c_language'>#C_language</a>
    
    <a class="link tag" href='https://Budnarae.github.io/tags/graphics'>#graphics</a>
    
    <a class="link tag" href='https://Budnarae.github.io/tags/42seoul'>#42seoul</a>
    
    <a class="link tag" href='https://Budnarae.github.io/tags/fdf'>#fdf</a>
    
    <br></br>
  </div>
  
  
  
  <details>
    <summary>
      <b>Table of Contents</b>
    </summary>
    <div class="toc numbered-subtitles"><nav id="TableOfContents">
  <ul>
    <li><a href="#fdf">FDF</a>
      <ul>
        <li><a href="#개요">개요</a></li>
        <li><a href="#행렬을-이용한-3차원-공간의-변환">행렬을 이용한 3차원 공간의 변환</a></li>
        <li><a href="#점과-점을-잇는-선을-그리기---브레젠험-알고리즘">점과 점을 잇는 선을 그리기 - 브레젠험 알고리즘</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
  </details>
  
  
  <article class="content numbered-subtitles">
    
    <h2 id="fdf">FDF</h2>
<h3 id="개요">개요</h3>
<p>fdf 과제는 아래와 같이 map 파일을 입력받아 3차원 형태로 출력하도록 하는 과제이다.<br>
map은 다음과 같이 해석된다.</p>
<ol>
<li>숫자의 가로 위치 : 3차원 좌표계의 x 값</li>
<li>숫자의 세로 위치 : y 값</li>
<li>숫자의 값 : z 값</li>
</ol>
<pre tabindex="0"><code>0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0 10 10  0  0 10 10  0  0  0 10 10 10 10 10  0  0  0
0  0 10 10  0  0 10 10  0  0  0  0  0  0  0 10 10  0  0
0  0 10 10  0  0 10 10  0  0  0  0  0  0  0 10 10  0  0
0  0 10 10 10 10 10 10  0  0  0  0 10 10 10 10  0  0  0
0  0  0 10 10 10 10 10  0  0  0 10 10  0  0  0  0  0  0
0  0  0  0  0  0 10 10  0  0  0 10 10  0  0  0  0  0  0
0  0  0  0  0  0 10 10  0  0  0 10 10 10 10 10 10  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
</code></pre><p><img src="https://i.ytimg.com/vi/uk8_4nJWyE4/maxresdefault.jpg" alt="1"></p>
<p>과제의 세부적인 조건은 다음과 같다.</p>
<ol>
<li><a href="https://ko.wikipedia.org/wiki/%EB%93%B1%EC%B6%95_%ED%88%AC%EC%98%81%EB%B2%95">등축투영</a>을 사용해야 함.</li>
<li>그래픽 구현에 있어 42 교육과정에서 자체적으로 제작한 <a href="https://github.com/sejinpark12/MiniLibX_man_kor/blob/main/mlx.md">MiniLibx</a>를 사용할 것.</li>
</ol>
<p>그리고 보너스 점수를 받고 싶다면 다음을 구현해야 한다.</p>
<ol>
<li>등축투영 외의 투영법을 하나 추가하기</li>
<li>확대/축소를 구현하기</li>
<li>이동(translate)을 구현하기</li>
<li>회전(rotate)을 구현하기</li>
<li>이 외에 원하는 추가 기능 하나를 구현하기.</li>
</ol>
<p>필자는 보너스 부분까지 구현하였으며, 아래의 과정을 통해 문제를 해결하였다.</p>
<ol>
<li>맵의 중앙 부분이 원점에 위치하도록(즉, 10 x 10 크기의 맵의 경우 (5, 5) 위치의 vertex가 원점으로 위치하도록) 이동 행렬을 계산</li>
<li>두 축에 대해 45도씩 회전하는 회전 행렬을 계산.</li>
<li>과재의 보너스 부분을 구현하기 위해, 키보드로 입력이 주어졌을 떄 추가적으로 이루어질 회전, 스케일, 이동 행렬을 계산.</li>
<li>스크린 좌표계로 변환하는 행렬을 계산. 이때, 1과정에서 맵의 중앙 부분이 원점에 위치하도록 했던 것을 되돌린다. 스크린 좌표계에는 음의 영역이 존재하지 않기 때문이다.</li>
<li>1~4에서 계산한 행렬을 행렬곱을 이용하여 압축한다. 행렬을 압축하는 이유는 최적화에 유리하기 때문이다. 만약 100개의 정점에 위의 행렬을 곱한다고 가정할 때, 4 * 100 = 500의 횟수만큼 연산하지만, 행렬을 압축하면 압축 비용(4) + 정점에 적용(100)까지 총 104회의 연산만 소요한다.</li>
<li></li>
</ol>
<p>본 과제의 핵심은 2차원(스크린)에 사물을 입체감이 느껴지게끔 투영하는 것이며, 이를 위해서는 그래픽스 지식이 요구된다.<br>
그래픽스 이론까지 전부 정리하기엔 내용이 지나치게 방대해지므로, 본문에서는 이를 생략하려 한다. 이 분야에 관심이 있다면 따로 시간을 들여 별도로 공부하는 것을 추천한다. 참고로 필자는 <a href="https://www.yes24.com/Product/Goods/107025224?pid=123487&amp;cosemkid=go16444756359099763&amp;gad_source=1&amp;gclid=CjwKCAiA_5WvBhBAEiwAZtCU77TGWttww1Z8EDT4GIIOn4JPB8QY7y5i0bpyXUpzsEs-Nj6h2it9sBoC9qgQAvD_BwE">이득우의 게임수학</a>이라는 서적을 통해 그래픽스를 공부했다.</p>
<h3 id="행렬을-이용한-3차원-공간의-변환">행렬을 이용한 3차원 공간의 변환</h3>
<p>개요에서 서술한 내용을 코드로 구현하면 아래와 같다.</p>
<pre tabindex="0"><code>//map의 중심을 좌표계의 원점(origin)에 위치하도록 하는 이동 행렬
void	init_t_origin(float m[4][4], t_map_size ms)
{
	m[0][0] = 1.0f;
	m[0][1] = 0.0f;
	m[0][2] = 0.0f;
	m[0][3] = -(float)ms.biggest_col_size / 2;
	m[1][0] = 0.0f;
	m[1][1] = 1.0f;
	m[1][2] = 0.0f;
	m[1][3] = -(float)ms.row_size / 2;
	m[2][0] = 0.0f;
	m[2][1] = 0.0f;
	m[2][2] = 1.0f;
	m[2][3] = -(float)ms.biggest_z_size / 2;
	m[3][0] = 0.0f;
	m[3][1] = 0.0f;
	m[3][2] = 0.0f;
	m[3][3] = 1.0f;
}

//map을 등축투영으로 변환하는 회전 행렬. 이 연산을 통해 데이터가 입체감을 띄게 된다.
void	init_r_isometric(float m[4][4])
{
	float	d;

	d = 45.0f * PI / 180.0f;
	m[0][0] = cos(d);
	m[0][1] = sin(d);
	m[0][2] = 0.0f;
	m[0][3] = 0.0f;
	m[1][0] = -cos(d) * sin(d);
	m[1][1] = cos(d) * cos(d);
	m[1][2] = -sin(d);
	m[1][3] = 0.0f;
	m[2][0] = -(sin(d) * sin(d));
	m[2][1] = cos(d) * sin(d);
	m[2][2] = cos(d);
	m[2][3] = 0.0f;
	m[3][0] = 0.0f;
	m[3][1] = 0.0f;
	m[3][2] = 0.0f;
	m[3][3] = 1.0f;
}

//보너스 추가 항목. map을 캐비닛 투영으로 변환하는 행렬이다. 축 하나를 기울이는 전단 행렬과 회전 행렬이 압축되어 있다.
void	init_r_cabinet(float m[4][4])
{
	float	d;

	d = PI / 6.0f;
	m[0][0] = 1.0f;
	m[0][1] = -0.5f;
	m[0][2] = 0.0f;
	m[0][3] = 0.0f;
	m[1][0] = 0.0f;
	m[1][1] = cos(d);
	m[1][2] = -sin(d);
	m[1][3] = 0.0f;
	m[2][0] = 0.0f;
	m[2][1] = sin(d);
	m[2][2] = cos(d);
	m[2][3] = 0.0f;
	m[3][0] = 0.0f;
	m[3][1] = 0.0f;
	m[3][2] = 0.0f;
	m[3][3] = 1.0f;
}

//보너스 추가 항목. 키보드 입력시 맵을 추가로 이동시키는 이동 행렬이다.
void	init_t(float m[4][4], t_control c)
{
	m[0][0] = 1.0f;
	m[0][1] = 0.0f;
	m[0][2] = 0.0f;
	m[0][3] = c.t_x;
	m[1][0] = 0.0f;
	m[1][1] = 1.0f;
	m[1][2] = 0.0f;
	m[1][3] = c.t_y;
	m[2][0] = 0.0f;
	m[2][1] = 0.0f;
	m[2][2] = 1.0f;
	m[2][3] = c.t_z;
	m[3][0] = 0.0f;
	m[3][1] = 0.0f;
	m[3][2] = 0.0f;
	m[3][3] = 1.0f;
}

//보너스 추가 항목. 키보드 입력시 맵을 추가로 회전시키는 회전 행렬이다.
void	init_r(float m[4][4], t_control c)
{
	float	d;

	d = PI / 180.0f;
	m[0][0] = cos(c.y_roll * d) * cos(c.z_yaw * d)
		+ sin(c.x_pitch * d) * sin(c.y_roll * d) * sin(c.z_yaw);
	m[0][1] = -sin(c.z_yaw * d) * cos(c.x_pitch * d);
	m[0][2] = sin(c.y_roll * d) * cos(c.z_yaw * d)
		+ sin(c.x_pitch * d) * sin(c.z_yaw * d) * cos(c.y_roll * d);
	m[0][3] = 0.0f;
	m[1][0] = sin(c.z_yaw * d) * cos(c.y_roll * d)
		+ sin(c.x_pitch * d) * sin(c.y_roll * d) * cos(c.z_yaw * d);
	m[1][1] = cos(c.x_pitch * d) * cos(c.z_yaw * d);
	m[1][2] = sin(c.y_roll * d) * sin(c.z_yaw * d)
		- sin(c.x_pitch * d) * cos(c.y_roll * d) * cos(c.z_yaw * d);
	m[1][3] = 0.0f;
	m[2][0] = -sin(c.y_roll * d) * cos(c.x_pitch * d);
	m[2][1] = sin(c.x_pitch * d);
	m[2][2] = cos(c.x_pitch * d) * cos(c.y_roll * d);
	m[2][3] = 0.0f;
	m[3][0] = 0.0f;
	m[3][1] = 0.0f;
	m[3][2] = 0.0f;
	m[3][3] = 1.0f;
}

보너스 추가 항목. 키보드 입력시 맵을 추가로 확대, 축소시키는 scale 행렬이다.
void	init_s(float m[4][4], t_control control)
{
	m[0][0] = control.scale_factor;
	m[0][1] = 0.0f;
	m[0][2] = 0.0f;
	m[0][3] = 0.0f;
	m[1][0] = 0.0f;
	m[1][1] = control.scale_factor;
	m[1][2] = 0.0f;
	m[1][3] = 0.0f;
	m[2][0] = 0.0f;
	m[2][1] = 0.0f;
	m[2][2] = control.scale_factor;
	m[2][3] = 0.0f;
	m[3][0] = 0.0f;
	m[3][1] = 0.0f;
	m[3][2] = 0.0f;
	m[3][3] = 1.0f;
}

//처음에 map을 좌표계의 중앙으로 이동시킨 것을 되돌려 스크린 좌표계에 적합하도록 한다.
void	init_t_screen(float m[4][4], t_screen_size screen_size)
{
	m[0][0] = 1.0f;
	m[0][1] = 0.0f;
	m[0][2] = 0.0f;
	m[0][3] = (float)screen_size.col / 2;
	m[1][0] = 0.0f;
	m[1][1] = 1.0f;
	m[1][2] = 0.0f;
	m[1][3] = (float)screen_size.row / 2;
	m[2][0] = 0.0f;
	m[2][1] = 0.0f;
	m[2][2] = 1.0f;
	m[2][3] = 0.0f;
	m[3][0] = 0.0f;
	m[3][1] = 0.0f;
	m[3][2] = 0.0f;
	m[3][3] = 1.0f;
}

//항등 행렬. 이 행렬에 앞선 행렬들을 모두 곱하여 압축한다.
void	init_merged_matrix(float m[4][4])
{
	m[0][0] = 1.0f;
	m[0][1] = 0.0f;
	m[0][2] = 0.0f;
	m[0][3] = 0.0f;
	m[1][0] = 0.0f;
	m[1][1] = 1.0f;
	m[1][2] = 0.0f;
	m[1][3] = 0.0f;
	m[2][0] = 0.0f;
	m[2][1] = 0.0f;
	m[2][2] = 1.0f;
	m[2][3] = 0.0f;
	m[3][0] = 0.0f;
	m[3][1] = 0.0f;
	m[3][2] = 0.0f;
	m[3][3] = 1.0f;
}

//4x4 행렬곱을 수행하는 함수
void	matrix_multiplication_4x4_4x4(float m1[4][4], float m2[4][4])
{
	int		i;
	int		j;
	float	tmp[4][4];

	i = -1;
	while (++i &lt; 4)
	{
		j = -1;
		while (++j &lt; 4)
			tmp[i][j] = m1[i][0] * m2[0][j] + m1[i][1] * m2[1][j]
				+ m1[i][2] * m2[2][j] + m1[i][3] * m2[3][j];
	}
	i = -1;
	while (++i &lt; 4)
	{
		j = -1;
		while (++j &lt; 4)
			m2[i][j] = tmp[i][j];
	}
}

//행렬과 정점의 곱셈을 수행하는 함수
void	matrix_multiplication_4x4_1x4(float m1[4][4], float m2[4])
{
	int		i;
	float	tmp[4];

	i = -1;
	while (++i &lt; 4)
	{
		tmp[i] = m1[i][0] * m2[0] + m1[i][1] * m2[1]
			+ m1[i][2] * m2[2] + m1[i][3] * m2[3];
	}
	i = -1;
	while (++i &lt; 4)
		m2[i] = tmp[i];
}

void	init_matrix(t_total *total)
{
    //행렬들을 초기화한다.
	init_t_screen(total -&gt; matrixs.t_screen, total -&gt; screen_size);
	init_r_isometric(total -&gt; matrixs.r_isometric);
	init_r_cabinet(total -&gt; matrixs.r_cabinet);
	init_t(total -&gt; matrixs.t, total -&gt; control);
	init_r(total -&gt; matrixs.r, total -&gt; control);
	init_s(total -&gt; matrixs.s, total -&gt; control);
	init_t_origin(total -&gt; matrixs.t_origin, total -&gt; map_size);
	init_merged_matrix(total -&gt; matrixs.merged_matrix);

    //항등행렬에 나머지 행렬들을 곱해 압축한다.

    //map을 좌표계의 중앙으로 옮긴다.
	matrix_multiplication_4x4_4x4(total -&gt; matrixs.t_origin,
		total -&gt; matrixs.merged_matrix);

    //scale, rotation, translation 순으로 곱해야 물체가 찌그러지지 않고 원형이 유지된다. 이를 강체 변환이라고 한다.
	matrix_multiplication_4x4_4x4(total -&gt; matrixs.s,
		total -&gt; matrixs.merged_matrix);
	matrix_multiplication_4x4_4x4(total -&gt; matrixs.r,
		total -&gt; matrixs.merged_matrix);
	matrix_multiplication_4x4_4x4(total -&gt; matrixs.t,
		total -&gt; matrixs.merged_matrix);
    
    //투영행렬을 곱한다.
    //투영이 등축으로 지정되었을 경우
	if (total -&gt; viewpoint == ISO)
		matrix_multiplication_4x4_4x4(total -&gt; matrixs.r_isometric,
			total -&gt; matrixs.merged_matrix);
    //투영이 캐비닛으로 지정되었을 경우
	else if (total -&gt; viewpoint == CAB)
		matrix_multiplication_4x4_4x4(total -&gt; matrixs.r_cabinet,
			total -&gt; matrixs.merged_matrix);
    
    //마지막으로 스크린 좌표계로 변환해주는 행렬을 곱한다.
	matrix_multiplication_4x4_4x4(total -&gt; matrixs.t_screen,
		total -&gt; matrixs.merged_matrix);
}
</code></pre><h3 id="점과-점을-잇는-선을-그리기---브레젠험-알고리즘">점과 점을 잇는 선을 그리기 - 브레젠험 알고리즘</h3>
<p>일련의 과정들을 통해 우리는 3차원 공간의 정점들을 변환하는 데 성공했다. 이제 우리는 이 점들을 이어 선분을 그려야 한다.<br>
가상의 3차원 공간은 무한하지만 실제 스크린에 담겨 있는 픽셀의 수는 한계가 있기 때문에, 이를 처리하는 과정이 필요하다.<br>
필자는 <a href="https://blog.naver.com/sorkelf/40151248390">브레젠험 알고리즘</a>을 사용하여 이를 해결하였다. 실수 연산 없이 정수 연산만을 사용하여 매우 빠르다는 것이 장점으로, 두 점의 픽셀 좌표와 기울기를 사용한 공식을 사용한다.</p>
<p>아래는 이를 코드로 구현한 것이다.</p>
<pre tabindex="0"><code>void	quadrant_4(t_mlx_data mlx_data, t_vertex a, t_vertex b)
{
	int		w;
	int		h;
	int		n;
	int		m;

	w = (int)b.vertex[0] - (int)a.vertex[0];
	h = (int)b.vertex[1] - (int)a.vertex[1];
	n = 0;
	m = 0;
	while ((int)a.vertex[0] - n != (int)b.vertex[0])
	{
		n++;
		if (2 * h * n + 2 * m * w + w &gt;= 0)
			m++;
		if (!((int)a.vertex[0] - n &lt;= 0 || (int)a.vertex[0] - n &gt;= 2560
				|| (int)a.vertex[1] + m &lt;= 0 || (int)a.vertex[1] + m &gt;= 1315))
			my_mlx_pixel_put(&amp;mlx_data.img_data,
				(int)a.vertex[0] - n, (int)a.vertex[1] + m,
				color_lerp(a.color, b.color, -n, w));
	}
}

void	quadrant_3(t_mlx_data mlx_data, t_vertex a, t_vertex b)
{
	int		w;
	int		h;
	int		n;
	int		m;

	w = (int)b.vertex[0] - (int)a.vertex[0];
	h = (int)b.vertex[1] - (int)a.vertex[1];
	n = 0;
	m = 0;
	while ((int)a.vertex[1] + m != (int)b.vertex[1])
	{
		m++;
		if (2 * w * m + 2 * n * h + h &lt;= 0)
			n++;
		if (!((int)a.vertex[0] - n &lt;= 0 || (int)a.vertex[0] - n &gt;= 2560
				|| (int)a.vertex[1] + m &lt;= 0 || (int)a.vertex[1] + m &gt;= 1315))
			my_mlx_pixel_put(&amp;mlx_data.img_data,
				(int)a.vertex[0] - n, (int)a.vertex[1] + m,
				color_lerp(a.color, b.color, m, h));
	}
}

void	quadrant_2(t_mlx_data mlx_data, t_vertex a, t_vertex b)
{
	int		w;
	int		h;
	int		n;
	int		m;

	w = (int)b.vertex[0] - (int)a.vertex[0];
	h = (int)b.vertex[1] - (int)a.vertex[1];
	n = 0;
	m = 0;
	while ((int)a.vertex[1] + m != (int)b.vertex[1])
	{
		m++;
		if (2 * w * m - 2 * n * h - h &gt;= 0)
			n++;
		if (!((int)a.vertex[0] + n &lt;= 0 || (int)a.vertex[0] + n &gt;= 2560
				|| (int)a.vertex[1] + m &lt;= 0 || (int)a.vertex[1] + m &gt;= 1315))
			my_mlx_pixel_put(&amp;mlx_data.img_data,
				(int)a.vertex[0] + n, (int)a.vertex[1] + m,
				color_lerp(a.color, b.color, m, h));
	}
}

void	quadrant_1(t_mlx_data mlx_data, t_vertex a, t_vertex b)
{
	int		w;
	int		h;
	int		n;
	int		m;

	w = (int)b.vertex[0] - (int)a.vertex[0];
	h = (int)b.vertex[1] - (int)a.vertex[1];
	n = 0;
	m = 0;
	while ((int)a.vertex[0] + n != (int)b.vertex[0])
	{
		n++;
		if (2 * h * n - 2 * m * w - w &gt;= 0)
			m++;
		if (!((int)a.vertex[0] + n &lt;= 0 || (int)a.vertex[0] + n &gt;= 2560
				|| (int)a.vertex[1] + m &lt;= 0 || (int)a.vertex[1] + m &gt;= 1315))
			my_mlx_pixel_put(&amp;mlx_data.img_data,
				(int)a.vertex[0] + n, (int)a.vertex[1] + m,
				color_lerp(a.color, b.color, n, w));
	}
}

void	bresenham_2(t_mlx_data mlx_data, t_vertex a, t_vertex b)
{
	float	slope;
	float	*av;
	float	*bv;

	av = a.vertex;
	bv = b.vertex;
	slope = (float)((int)bv[1] - (int)av[1]) / (float)((int)bv[0] - (int)av[0]);
	if (av[0] &lt;= bv[0] &amp;&amp; av[1] &lt;= bv[1] &amp;&amp; slope &lt; 1.0f &amp;&amp; slope &gt;= 0.0f)
		quadrant_1(mlx_data, a, b);
	else if (av[0] &lt;= bv[0] &amp;&amp; av[1] &lt;= bv[1] &amp;&amp; slope &gt;= 1.0f)
		quadrant_2(mlx_data, a, b);
	else if (av[0] &gt; bv[0] &amp;&amp; av[1] &lt;= bv[1] &amp;&amp; slope &lt; -1.0f)
		quadrant_3(mlx_data, a, b);
	else if (av[0] &gt; bv[0] &amp;&amp; av[1] &lt;= bv[1] &amp;&amp; slope &gt;= -1.0f &amp;&amp; slope &lt; 0.0f)
		quadrant_4(mlx_data, a, b);
	else if (av[0] &gt; bv[0] &amp;&amp; av[1] &gt; bv[1] &amp;&amp; slope &lt; 1.0f &amp;&amp; slope &gt;= 0.0f)
		quadrant_1(mlx_data, b, a);
	else if (av[0] &gt; bv[0] &amp;&amp; av[1] &gt; bv[1] &amp;&amp; slope &gt;= 1.0f)
		quadrant_2(mlx_data, b, a);
	else if (av[0] &lt;= bv[0] &amp;&amp; av[1] &gt; bv[1] &amp;&amp; slope &lt; -1.0f)
		quadrant_3(mlx_data, b, a);
	else if (av[0] &lt;= bv[0] &amp;&amp; av[1] &gt; bv[1] &amp;&amp; slope &gt;= -1.0f &amp;&amp; slope &lt; 0.0f)
		quadrant_4(mlx_data, b, a);
}

void	bresenham(t_mlx_data mlx_data, t_vertex a, t_vertex b)
{
	if ((int)b.vertex[1] == (int)a.vertex[1]
		&amp;&amp; (int)b.vertex[0] &gt; (int)a.vertex[0])
		quadrant_1(mlx_data, a, b);
	else if ((int)b.vertex[1] == (int)a.vertex[1]
		&amp;&amp; (int)b.vertex[0] &lt; (int)a.vertex[0])
		quadrant_1(mlx_data, b, a);
	else if ((int)b.vertex[0] == (int)a.vertex[0]
		&amp;&amp; (int)b.vertex[1] &gt; (int)a.vertex[1])
		quadrant_2(mlx_data, a, b);
	else if ((int)b.vertex[0] == (int)a.vertex[0]
		&amp;&amp; (int)b.vertex[1] &lt; (int)a.vertex[1])
		quadrant_2(mlx_data, b, a);
	else
		bresenham_2(mlx_data, a, b);
}
</code></pre>
    
  </article>

  <button onclick="topFunction()" id="back-to-top" title="Go to top">Back to Top</button>

  

<div id="sharingbuttons">
    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    
</div>
  <div class="paginator">
    
    <a class="link" href="https://Budnarae.github.io/posts/pipex/" title="쉘의 파이프를 구현하는 과제, Pipex">← prev</a>
    
    
    <a></a>
    
  </div>
  <div class="comment">
    
    
    
      <script src="https://giscus.app/client.js"
        data-repo="michaelneuper/hugo-texify3"
        data-repo-id="R_kgDOIjPNaQ"
        data-category="General"
        data-category-id="DIC_kwDOIjPNac4CaklA"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme=""
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
  </script>
  
  </div>
  
  
</main>

    <footer id="footer">
  <div>
    <span>Powered by  <a class=link href=https://gohugo.io target=_blank rel=noopener>Hugo</a> |
Theme <a class=link href=https://github.com/michaelneuper/hugo-texify3 target=_blank rel=noopener>TeXify3</a>
</span>
  </div>
  <div>
    <span>Copyright © 2024 budnarae</span>
  </div>
</footer>

  </div>

  
  <script src='https://Budnarae.github.io/js/script.js' defer></script>

  
  

  
  

  
  

</body>

</html>
